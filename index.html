<!DOCTYPE html>
<html lang="en">
    <!-- title -->


    

<!-- keywords -->



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="John Doe">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="John Doe">
    
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="">
    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/favicon.ico">
    
    <title>Akemi</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link rel="preload" href="/css/style.css?v=20211217" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="/css/dark.css?v=20211217" as="style">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" href="/css/mobile.css?v=20211217" media="(max-width: 960px)">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js?v=20211217" as="script">
    <link rel="preload" href="/scripts/dark.js?v=20211217" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    
    <!-- 百度统计  -->
    
    <!-- Google tag (gtag.js) -->
    

<meta name="generator" content="Hexo 7.2.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
    
        <body class="home-body">
    
        <!-- header -->
        <header class="header header-mobile index-header">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        
            <div class="header-sidebar-menu">
        
            
                <div style="padding-left: 1px;">&#xe775;</div>
            
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href=/>Akemi</a>
        </span>
    </div>
    <!-- toggle banner for post layout -->
    
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed index-footer-fixed">
    <!-- back to top button -->
    <div class="footer-fixed-element">
        
            <div class="back-top back-top-hidden">
        
        
            <div>&#xe639;</div>
        
        </div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="







    height:50vh;

">
    
    <!-- 主页  -->
    
        
    <!-- 文章页  -->
    
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/index-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
                Akemi
            <!-- 文章页  -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
                
                    it's better to burn out than to fade away
                
            <!-- 文章页  -->
            
        </p>
        <!-- 文章页 meta -->
        
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
            <div class="container container-unloaded">
                <main class="main index-page">
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/04/26/nginx/">
                
                <span class="abstract-title-text">nginx详解</span>
            </a>
            <div class="abstract-content">
                <p>nginx可以通过反向代理功能对后端服务器实现负载均衡功能<br>keepalived 是一种高可用集群选举软件</p>
<h1 id="正向代理与反向代理"><a href="#正向代理与反向代理" class="headerlink" title="正向代理与反向代理"></a>正向代理与反向代理</h1><p>正向代理：</p>
<p>举个例子</p>
<p>从本机——代理服务器之间打一个vpn</p>
<p>包装后外层地址变为 目的地址为代理服务器</p>
<p>代理服务器访问服务器，服务器返回数据</p>
<p>代理服务器通过vpn传回数据</p>
<p>通常情况下的正向代理是通过路由器SNAT功能完成</p>
<p>反向代理：</p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/04/26</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/04/26/exsi7/">
                
                <span class="abstract-title-text">ESXi物理机安装踩坑汇总</span>
            </a>
            <div class="abstract-content">
                <p>物理机型号： 零刻Sei12 i5-12450H 32G内存 2T SSD</p>
<h1 id="2024-2-20更新"><a href="#2024-2-20更新" class="headerlink" title="2024.2.20更新"></a>2024.2.20更新</h1><p>我的i225-v用第三方的驱动封装没有用，最近搜的时候发现在VMware官网社区找到了社区封装的驱动包，支持7.0版本的i225和i219系列的网卡，支持8.0版本i219版本的网卡</p>
<p>详细页链接</p>
<p><a target="_blank" rel="noopener" href="https://communities.vmware.com/t5/Flings-Docs/Community-Network-Driver-for-ESXi-Documentation/ta-p/2998941">Community Network Driver for ESXi Documentation - VMware Technology Network VMTN</a></p>
<p>下载链接</p>
<p><a target="_blank" rel="noopener" href="https://download3.vmware.com/software/vmw-tools/community-network-driver/Net-Community-Driver_1.2.7.0-1vmw.700.1.0.15843807_19480755.zip">https://download3.vmware.com/software/vmw-tools/community-network-driver/Net-Community-Driver_1.2.7.0-1vmw.700.1.0.15843807_19480755.zip</a></p>
<p>使用这个vib包进行封装</p>
<p>封装方法见下文，将文件名替换成这个压缩包里解压出来的vib文件即可</p>
<h1 id="申请许可与下载镜像"><a href="#申请许可与下载镜像" class="headerlink" title="申请许可与下载镜像"></a>申请许可与下载镜像</h1>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/04/26</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/04/26/DEBD/">
                
                <span class="abstract-title-text">DRBD分布式存储单活实验</span>
            </a>
            <div class="abstract-content">
                <p>DRBD的全称为：Distributed Replicated Block Device (DRBD) 分布式块设备复制<br>与心跳连接结合使用，构建高可用性(HA)的集群。</p>
<p>实现方式是通过网络来镜像(mirror)整个设备。它允许用户在远程机器上建立一个本地块设备的实时镜像。DRBD负责接收数据，把数据写到本地磁盘，然后发送给另一个主机。另一个主机再将数据存到自己的磁盘中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240426222710.png"></p>
<p>参考文档<br><a target="_blank" rel="noopener" href="https://linbit.com/drbd/">DRBD - LINBIT</a></p>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240426222730.png"></p>
<p>VMwareWorkstation 16Pro<br>centos8-stream<br>centos8-DRBD1 192.168.8.157&#x2F;24<br>centos8-DRBD2 192.168.8.158&#x2F;24<br>——8G内存，4core<br>——nat网络<br>——系统盘100G<br>——20G SCSI磁盘 - 用以被DRBD接管<br>——最小化安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置软件源</span></span><br><span class="line"><span class="built_in">rm</span> -rf /etc/yum.repos.d/*</span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/yum.repos.d/iso.repo &lt;&lt;<span class="string">END</span></span><br><span class="line"><span class="string">[AppStream]</span></span><br><span class="line"><span class="string">name=AppStream</span></span><br><span class="line"><span class="string">baseurl=http://mirrors.163.com/centos/8-stream/AppStream/x86_64/os/</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">[BaseOS]</span></span><br><span class="line"><span class="string">name=BaseOS</span></span><br><span class="line"><span class="string">baseurl=http://mirrors.163.com/centos/8-stream/BaseOS/x86_64/os/</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">[epel]</span></span><br><span class="line"><span class="string">name=epel</span></span><br><span class="line"><span class="string">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/8/Everything/x86_64/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">END</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置主机名</span></span><br><span class="line">hostnamectl set-hostname DRBD01 &amp;&amp; bash</span><br><span class="line">hostnamectl set-hostname DRBD02 &amp;&amp; bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#安全相关</span></span><br><span class="line">sed -i <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=permissive/&#x27;</span> /etc/selinux/config</span><br><span class="line">setenforce 0</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld --now</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置host文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4</span></span><br><span class="line"><span class="string">::1 localhost localhost.localdomain localhost6 localhost6.localdomain6</span></span><br><span class="line"><span class="string">192.168.8.157 DRBD01</span></span><br><span class="line"><span class="string">192.168.8.158 DRBD02</span></span><br><span class="line"><span class="string">&quot;</span> &gt; /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装编译软件和依赖</span></span><br><span class="line">yum -y group install <span class="string">&quot;Development Tools&quot;</span> &amp;&amp; yum -y install wget vim net-tools lvm2</span><br><span class="line">yum -y install  drbd <span class="comment">#如果使用默认源可能没有这个包</span></span><br><span class="line"><span class="comment">#从官网下载安装包，编译安装</span></span><br><span class="line">wget https://pkg.linbit.com//downloads/drbd/9/drbd-9.1.11.tar.gz</span><br><span class="line">tar zxvf drbd-9.1.11.tar.gz</span><br><span class="line"><span class="built_in">cd</span> drbd-9.1.11</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#把drbd模块暂时加载到内核中</span></span><br><span class="line">modprobe drbd</span><br><span class="line">lsmod | grep -i drbd</span><br><span class="line"></span><br><span class="line"><span class="comment">#把drbd模块持久化加载到内核中</span></span><br><span class="line"><span class="built_in">echo</span> drbd &gt; /etc/modules-load.d/drbd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#drbd配置文件</span></span><br><span class="line">drbd配置文件/etc/drbd.d/global_common.conf</span><br><span class="line"><span class="comment">#[global]全局参数</span></span><br><span class="line"><span class="comment">#[common]通用参数- handlers -startup - options -disk -net</span></span><br><span class="line">drbd主配置文件/etc/drbd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建卷</span></span><br><span class="line">pvcreate /dev/sdb</span><br><span class="line">vgcreate drbd /dev/sdb <span class="comment">#卷组名drbd</span></span><br><span class="line">lvcreate -n drbd -l 100%free drbd <span class="comment">#逻辑卷drbd,所有空间都分配,也可以直接指定20G</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改配置文件，添加文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">#指定资源名为ws-drbd</span></span><br><span class="line"><span class="string">resource ws-drbd &#123;</span></span><br><span class="line"><span class="string">#指定元数据</span></span><br><span class="line"><span class="string">meta-disk internal;</span></span><br><span class="line"><span class="string">#指定逻辑磁盘</span></span><br><span class="line"><span class="string">device /dev/drbd1;</span></span><br><span class="line"><span class="string">net &#123;</span></span><br><span class="line"><span class="string">verify-alg sha256;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">#指定节点，与对应的逻辑卷</span></span><br><span class="line"><span class="string">on DRBD01 &#123;</span></span><br><span class="line"><span class="string">address 192.168.8.157:7788;</span></span><br><span class="line"><span class="string">disk /dev/drbd/drbd;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">on DRBD02 &#123;</span></span><br><span class="line"><span class="string">address 192.168.8.158:7788;</span></span><br><span class="line"><span class="string">disk /dev/drbd/drbd;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125; &quot;</span> &gt; /etc/drbd.d/ws-drdb.res</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建drbd资源</span></span><br><span class="line">drbdadm create-md ws-drbd</span><br><span class="line">drbdadm up ws-drbd</span><br><span class="line"></span><br><span class="line"><span class="comment">#此时已经设置完成，两台节点都显示如下</span></span><br><span class="line">drbdadm status</span><br><span class="line"><span class="comment">#ws-drbd role:Secondary</span></span><br><span class="line"><span class="comment">#  disk:Inconsistent  非一致性状态</span></span><br><span class="line"><span class="comment">#  DRBD01 role:Secondary</span></span><br><span class="line"><span class="comment">#    peer-disk:Inconsistent</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在主节点上设置主节点</span></span><br><span class="line">drbdadm primary ws-drbd --force</span><br><span class="line"></span><br><span class="line">drbdadm status <span class="comment">#同步中</span></span><br><span class="line"><span class="comment">#ws-drbd role:Primary</span></span><br><span class="line"><span class="comment">#  disk:UpToDate</span></span><br><span class="line"><span class="comment">#  DRBD02 role:Secondary</span></span><br><span class="line"><span class="comment">#    replication:SyncSource peer-disk:Inconsistent done:16.60</span></span><br><span class="line"></span><br><span class="line">lsblk <span class="comment">#能看到多了一个drbd1磁盘</span></span><br><span class="line"><span class="comment">#NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span></span><br><span class="line"><span class="comment">#sda           8:0    0  100G  0 disk</span></span><br><span class="line"><span class="comment">#├─sda1        8:1    0    1G  0 part /boot</span></span><br><span class="line"><span class="comment">#└─sda2        8:2    0   99G  0 part</span></span><br><span class="line"><span class="comment">#  ├─cs-root 253:0    0 65.2G  0 lvm  /</span></span><br><span class="line"><span class="comment">#  ├─cs-swap 253:1    0    2G  0 lvm  [SWAP]</span></span><br><span class="line"><span class="comment">#  └─cs-home 253:2    0 31.8G  0 lvm  /home</span></span><br><span class="line"><span class="comment">#sdb           8:16   0   20G  0 disk</span></span><br><span class="line"><span class="comment">#└─drbd-drbd 253:3    0   20G  0 lvm</span></span><br><span class="line"><span class="comment">#  └─drbd1   147:1    0   20G  0 disk</span></span><br><span class="line"><span class="comment">#sr0          11:0    1 12.3G  0 rom</span></span><br><span class="line"></span><br><span class="line">drbdadm status <span class="comment">#同步完成</span></span><br><span class="line"><span class="comment">#ws-drbd role:Primary</span></span><br><span class="line"><span class="comment">#  disk:UpToDate</span></span><br><span class="line"><span class="comment">#  DRBD02 role:Secondary</span></span><br><span class="line"><span class="comment">#    peer-disk:UpToDate</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#测试是否能够同步</span></span><br><span class="line"><span class="comment">#在主节点上操作</span></span><br><span class="line">mkfs.ext4 /dev/drbd1</span><br><span class="line">mount /dev/drbd1 /mnt/</span><br><span class="line"><span class="built_in">echo</span> 1 &gt;  /mnt/test</span><br><span class="line">poweroff</span><br><span class="line"></span><br><span class="line"><span class="comment">#在备节点上操作</span></span><br><span class="line"><span class="comment">#能看到test已经被同步到备节点的drbd1中</span></span><br><span class="line">mount /dev/drbd1 /mnt/</span><br><span class="line"><span class="built_in">ls</span> /mnt/</span><br><span class="line"><span class="comment">#lost+found  test</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/04/26</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/04/26/linux-raid/">
                
                <span class="abstract-title-text">基于mdadm创建与管理软raid</span>
            </a>
            <div class="abstract-content">
                <h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>VMware workstation 17pro<br>CentOS Linux release 7.9.2009 (Core)<br>——内存8G，16vCPU<br>——硬盘系统盘100G（自动分区）<br>——四块20G硬盘，均为SCSI类型</p>
<p>#在没有操作系统的情况下，可以在装系统时将磁盘做软raid，然后使用软raid作为系统盘<br>#在重构时，软raid会大大增加CPU的负担，在实际生产环境中不建议使用<br>#同一块盘的不同分区也可以进行软raid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前磁盘状态</span></span><br><span class="line">lsblk</span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0  100G  0 disk </span><br><span class="line">├─sda1            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2            8:2    0   99G  0 part </span><br><span class="line">  ├─centos-root 253:0    0   50G  0 lvm  /</span><br><span class="line">  ├─centos-swap 253:1    0  3.9G  0 lvm  [SWAP]</span><br><span class="line">  └─centos-home 253:2    0 45.1G  0 lvm  /home</span><br><span class="line">sdb               8:16   0   20G  0 disk </span><br><span class="line">sdc               8:32   0   20G  0 disk </span><br><span class="line">sdd               8:48   0   20G  0 disk </span><br><span class="line">sde               8:64   0   20G  0 disk </span><br><span class="line">sr0              11:0    1  4.5G  0 rom  /run/media/root/CentOS 7 x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="1-安装mdadm"><a href="#1-安装mdadm" class="headerlink" title="1.安装mdadm"></a>1.安装mdadm</h1><p>yum -y install mdadm</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看系统集成的mod，能看到支持</span></span><br><span class="line">lsmod | grep raid</span><br><span class="line">raid456               151196  1 </span><br><span class="line">async_raid6_recov      17288  1 raid456</span><br><span class="line">async_memcpy           12768  2 raid456,async_raid6_recov</span><br><span class="line">async_pq               13332  2 raid456,async_raid6_recov</span><br><span class="line">raid6_pq              102527  3 async_pq,raid456,async_raid6_recov</span><br><span class="line">async_xor              13127  3 async_pq,raid456,async_raid6_recov</span><br><span class="line">async_tx               13509  5 async_pq,raid456,async_xor,async_memcpy,async_raid6_recov</span><br><span class="line">raid1                  44113  0 </span><br><span class="line">raid0                  18164  0 </span><br><span class="line">libcrc32c              12644  4 xfs,raid456,nf_nat,nf_conntrack</span><br></pre></td></tr></table></figure>

<h1 id="2-创建raid"><a href="#2-创建raid" class="headerlink" title="2.创建raid"></a>2.创建raid</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建raid名为/dev/md0，选另外名字可能报错 使用mdadm -C亦可</span></span><br><span class="line">mdadm --create /dev/md0 \</span><br><span class="line">-a <span class="built_in">yes</span> \ <span class="comment">#自动创建raid设备</span></span><br><span class="line">-l 0 \ <span class="comment">#设定raid类型为raid0</span></span><br><span class="line">-n 2 /dev/sdb /dev/sdc <span class="comment">#指定2块硬盘，sdb与sdc</span></span><br><span class="line"><span class="comment">#mdadm: Defaulting to version 1.2 metadata</span></span><br><span class="line"><span class="comment">#mdadm: array /dev/md0 started.</span></span><br><span class="line">mdadm --create /dev/md1 -a <span class="built_in">yes</span> -l 1 -n 2 /dev/sdd /dev/sde</span><br><span class="line"><span class="comment">#输入yes忽略提示</span></span><br><span class="line"><span class="comment">#mdadm: Defaulting to version 1.2 metadata</span></span><br><span class="line"><span class="comment">#mdadm: array /dev/md1 started.</span></span><br></pre></td></tr></table></figure>

<h2 id="查看软raid信息与状态"><a href="#查看软raid信息与状态" class="headerlink" title="查看软raid信息与状态"></a>查看软raid信息与状态</h2>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/04/26</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/04/26/ansible/">
                
                <span class="abstract-title-text">Ansible笔记集合</span>
            </a>
            <div class="abstract-content">
                <p>注：本文不适合初学者观看</p>
<h1 id="centos安装ansible"><a href="#centos安装ansible" class="headerlink" title="centos安装ansible"></a>centos安装ansible</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">control-host节点（可联网）</span><br><span class="line"><span class="comment">#调整网络配置</span></span><br><span class="line">外网网络-从dhcp获取</span><br><span class="line">内部网络</span><br><span class="line"></span><br><span class="line">从epel安装</span><br><span class="line">yum -y install ansible</span><br><span class="line">yum list | grep ansible</span><br><span class="line">ansible.noarch                           2.9.27-1.el7                  epel</span><br><span class="line">ansible-collection-microsoft-sql.noarch  1.1.0-1.el7_9                 extras</span><br><span class="line">ansible-doc.noarch                       2.9.27-1.el7                  epel</span><br><span class="line">ansible-inventory-grapher.noarch         2.4.4-1.el7                   epel</span><br><span class="line">ansible-lint.noarch                      3.5.1-1.el7                   epel</span><br><span class="line">ansible-openstack-modules.noarch         0-20140902git79d751a.el7      epel</span><br><span class="line">ansible-python3.noarch                   2.9.27-1.el7                  epel</span><br><span class="line">ansible-review.noarch                    0.13.4-1.el7                  epel</span><br><span class="line">ansible-test.noarch                      2.9.27-1.el7                  epel</span><br><span class="line">centos-release-ansible-27.noarch         1-1.el7                       extras</span><br><span class="line">centos-release-ansible-28.noarch         1-1.el7                       extras</span><br><span class="line">centos-release-ansible-29.noarch         1-1.el7                       extras</span><br><span class="line">centos-release-ansible26.noarch          1-3.el7.centos                extras</span><br><span class="line">kubernetes-ansible.noarch                0.6.0-0.1.gitd65ebd5.el7      epel</span><br><span class="line">python2-ansible-runner.noarch            1.0.1-1.el7                   epel</span><br><span class="line">python2-ansible-tower-cli.noarch         3.3.9-1.el7                   epel</span><br><span class="line">vim-ansible.noarch                       3.2-1.el7                     epel</span><br><span class="line"></span><br><span class="line">yum -y install ansible</span><br><span class="line"></span><br><span class="line">ansible --version</span><br><span class="line">ansible 2.9.27</span><br><span class="line">  config file = /root/ansible.cfg</span><br><span class="line">  configured module search path = [u<span class="string">&#x27;/root/.ansible/plugins/modules&#x27;</span>, u<span class="string">&#x27;/usr/share/ansible/plugins/modules&#x27;</span>]</span><br><span class="line">  ansible python module location = /usr/lib/python2.7/site-packages/ansible</span><br><span class="line">  executable location = /usr/bin/ansible</span><br><span class="line">  python version = 2.7.5 (default, Nov 14 2023, 16:14:06) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44)]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="sshpass快速分发"><a href="#sshpass快速分发" class="headerlink" title="sshpass快速分发"></a>sshpass快速分发</h1><p>分发hosts文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从/etc/hosts中提取IP地址并跳过前两行  </span></span><br><span class="line">ips=$(awk <span class="string">&#x27;NR &gt; 2 &#123; print $1 &#125;&#x27;</span> /etc/hosts)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 统计IP地址的数量  </span></span><br><span class="line">ip_count=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$ips</span>&quot;</span> | <span class="built_in">wc</span> -l)  </span><br><span class="line"></span><br><span class="line"><span class="comment">#定义主机密码password</span></span><br><span class="line">PASSWORD=<span class="string">&quot;1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没有找到任何IP地址，则退出脚本  </span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$ip_count</span> -eq 0 ]; <span class="keyword">then</span>  </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;No IP addresses found to ping.&quot;</span>  </span><br><span class="line">    <span class="built_in">exit</span> 1  </span><br><span class="line"><span class="keyword">fi</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 循环遍历每个IP地址  </span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> <span class="variable">$ips</span>; <span class="keyword">do</span>  </span><br><span class="line">    <span class="comment"># 使用ping命令测试连通性，-c 1 表示发送一个ping包，-W 1 表示等待1秒超时  </span></span><br><span class="line">    <span class="keyword">if</span> ping -c 1 -W 1 <span class="string">&quot;<span class="variable">$ip</span>&quot;</span> &amp;&gt; /dev/null; <span class="keyword">then</span>  </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Ping successful for <span class="variable">$ip</span>, attempting to SCP /etc/hosts.&quot;</span>  </span><br><span class="line">          </span><br><span class="line">        <span class="comment"># 使用sshpass进行无密码SSH登录和scp传输，请确保sshpass已安装  </span></span><br><span class="line">        <span class="comment"># 注意：将YOUR_PASSWORD替换为实际的SSH密码，出于安全考虑，不建议在脚本中硬编码密码  </span></span><br><span class="line">        sshpass -p <span class="string">&quot;<span class="variable">$PASSWORD</span>&quot;</span> scp /etc/hosts <span class="string">&quot;<span class="variable">$ip</span>&quot;</span>:/etc/hosts  </span><br><span class="line">          </span><br><span class="line">        <span class="comment"># 检查scp命令的退出状态  </span></span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span>  </span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;/etc/hosts successfully copied to <span class="variable">$ip</span>.&quot;</span>  </span><br><span class="line">        <span class="keyword">else</span>  </span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Failed to copy /etc/hosts to <span class="variable">$ip</span>.&quot;</span>  </span><br><span class="line">        <span class="keyword">fi</span>  </span><br><span class="line">    <span class="keyword">else</span>  </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Ping failed for <span class="variable">$ip</span>, skipping SCP.&quot;</span>  </span><br><span class="line">    <span class="keyword">fi</span>  </span><br><span class="line"><span class="keyword">done</span>  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Ping and SCP process completed for <span class="variable">$ip_count</span> IP addresses.&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="ansible配置文件"><a href="#ansible配置文件" class="headerlink" title="ansible配置文件"></a>ansible配置文件</h1><h2 id="静态inventory文件"><a href="#静态inventory文件" class="headerlink" title="静态inventory文件"></a>静态inventory文件</h2><p>定义了ansible管理的主机</p>
<p>静态inventory文件</p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/04/26</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/02/27/harbor/">
                
                <span class="abstract-title-text">本地部署harbor私有镜像仓库</span>
            </a>
            <div class="abstract-content">
                <p>环境<br>VMware Workstation 17 Pro<br>CentOS Linux release 7.9.2009 (Core)<br>4G，8vCPU，100G精简置备，NAT网络网段192.168.8.0&#x2F;24<br>wsdocker 192.168.8.150&#x2F;24<br>harbor 192.168.8.148&#x2F;24</p>
<p>harbor版本: v2.10</p>
<h1 id="自签发证书"><a href="#自签发证书" class="headerlink" title="自签发证书"></a>自签发证书</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname harbor &amp;&amp; bash</span><br><span class="line"><span class="comment">#因为要用https访问harbor，所以需要使用自签发证书</span></span><br><span class="line">1.生成CA证书</span><br><span class="line">SSL工具生成2048位的密钥对，并将私钥保存到名为 <span class="string">&quot;ca.key&quot;</span> 的文件中，3072位更加安全</span><br><span class="line">openssl genrsa -out ca.key 2048</span><br><span class="line">生成一个自签发的 X.509 格式的 CA（证书颁发机构）证书</span><br><span class="line"><span class="comment">#-x509: 生成一个自签发的 X.509 格式的证书，而不是生成证书签署请求</span></span><br><span class="line"><span class="comment">#-key ca.key: 指定用于生成证书的私钥文件路径和文件名为 &quot;ca.key&quot;。该私钥将与生成的证书绑定。</span></span><br><span class="line"><span class="comment">#-out ca.pem: 指定生成的证书文件的输出路径和文件名为 &quot;ca.pem&quot;</span></span><br><span class="line">openssl req -new -x509 -days 365 -key ca.key -out ca.pem</span><br><span class="line"><span class="comment">#选择国家CN，城市BJ</span></span><br><span class="line"></span><br><span class="line">2.生成域名的证书</span><br><span class="line">SSL工具生成2048位的RSA私钥</span><br><span class="line">openssl genrsa -out harbor.key 2048</span><br><span class="line">SSL工具用创建的私钥生成一个证书签署请求，用以向CA申请签署证书</span><br><span class="line"><span class="comment">#-key harbor.key: 指定私钥文件的路径和文件名为 &quot;harbor.key&quot;。该私钥将与生成的证书绑定。</span></span><br><span class="line"><span class="comment">#-out harbor.csr: 指定生成的证书签署请求的输出路径和文件名为 &quot;harbor.csr&quot;</span></span><br><span class="line">openssl req -new -key harbor.key -out harbor.csr</span><br><span class="line"><span class="comment">#选择国家CN，城市BJ，hostname harbor</span></span><br><span class="line"></span><br><span class="line">3.签发证书</span><br><span class="line">证书签署请求（CSR）与根证书进行签署，生成一个具有指定有效期的 X.509 格式的证书</span><br><span class="line"><span class="comment">#-in harbor.csr: 指定输入的证书签署请求文件路径和文件名为 &quot;harbor.csr&quot;</span></span><br><span class="line"><span class="comment">#-CA ca.pem: 指定用于签署证书的自签发 CA 证书文件路径和文件名为 &quot;ca.pem&quot;</span></span><br><span class="line"><span class="comment">#-CAkey ca.key: 指定用于签署证书的自签发 CA 私钥文件路径和文件名为 &quot;ca.key&quot;。该私钥与上述的 CA 证书配对。</span></span><br><span class="line"><span class="comment">#-CAcreateserial: 指定在签署证书时自动生成一个序列号文件。</span></span><br><span class="line"><span class="comment">#-out harbor.pem: 指定生成的证书文件的输出路径和文件名为 &quot;harbor.pem&quot;</span></span><br><span class="line"><span class="comment">#-days 365: 指定生成的证书的有效期为 365 天</span></span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> harbor.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out harbor.pem -days 365</span><br><span class="line"><span class="comment">#Signature ok</span></span><br><span class="line"><span class="comment">#subject=/C=CN/ST=BJ/L=BJ/O=Default Company Ltd/CN=harbor</span></span><br><span class="line"><span class="comment">#Getting CA Private Key</span></span><br><span class="line"><span class="comment">#证书签发成功</span></span><br></pre></td></tr></table></figure>

<h1 id="安装harbor"><a href="#安装harbor" class="headerlink" title="安装harbor"></a>安装harbor</h1><p>harbor版本采用最新的v2.10<br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240227173541.png" alt="图片"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安全相关</span></span><br><span class="line">yum -y install iptables-services</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld --now</span><br><span class="line">systemctl <span class="built_in">disable</span> iptables --now</span><br><span class="line">iptables -F</span><br><span class="line">sed -i <span class="string">&#x27;s/SELINUX=.*/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line"><span class="comment">#时钟同步，注释掉默认服务器，并使用cn.pool.ntp.org</span></span><br><span class="line">sed -i <span class="string">&#x27;s/^server/#server/g&#x27;</span> /etc/chrony.conf</span><br><span class="line">sed -i <span class="string">&#x27;1s/^/server cn.pool.ntp.org iburst\n/&#x27;</span> /etc/chrony.conf</span><br><span class="line">systemctl restart chronyd.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改hosts文件，添加解析</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">192.168.8.150 wsdocker</span></span><br><span class="line"><span class="string">192.168.8.148 harbor</span></span><br><span class="line"><span class="string">&quot;</span> &gt;&gt; /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">#软件包安装，多安装几遍</span></span><br><span class="line">yum install -y  wget net-tools nfs-utils lrzsz gcc gcc-c++ make cmake libxml2-devel openssl-devel curl curl-devel unzip sudo ntp libaio-devel wget vim ncurses-devel autoconf automake zlib-devel  python-devel epel-release openssh-server socat ipvsadm conntrack</span><br><span class="line">yum install -y  wget net-tools nfs-utils lrzsz gcc gcc-c++ make cmake libxml2-devel openssl-devel curl curl-devel unzip sudo ntp libaio-devel wget vim ncurses-devel autoconf automake zlib-devel  python-devel epel-release openssh-server socat ipvsadm conntrack</span><br><span class="line">yum install -y  wget net-tools nfs-utils lrzsz gcc gcc-c++ make cmake libxml2-devel openssl-devel curl curl-devel unzip sudo ntp libaio-devel wget vim ncurses-devel autoconf automake zlib-devel  python-devel epel-release openssh-server socat ipvsadm conntrack</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装docker-ce</span></span><br><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sh get-docker.sh</span><br><span class="line">systemctl <span class="built_in">enable</span> docker --now</span><br><span class="line">docker --version</span><br><span class="line"><span class="comment">#Docker version 24.0.7, build afdd53b</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启用linux的ip转发功能，使其可以作为路由器或vpn服务器使用</span></span><br><span class="line"><span class="comment">#加载模块，br_netfilte用于支持网络桥接和网络过滤，暂时加载即可</span></span><br><span class="line">modprobe br_netfilter</span><br><span class="line"><span class="comment">#修改/etc/sysctl.d/docker.conf文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables = 1</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward = 1</span></span><br><span class="line"><span class="string">&quot;</span> &gt; /etc/sysctl.d/docker.conf</span><br><span class="line"><span class="comment">#使内核配置文件生效</span></span><br><span class="line">sysctl -p /etc/sysctl.d/docker.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置docker镜像加速，这是我的阿里云镜像加速器</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;registry-mirrors&quot;: [&quot;https://bsx9xf1d.mirror.aliyuncs.com&quot;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#x27;</span> &gt;&gt; /etc/docker/daemon.json</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装docker-compose</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget https://github.com/docker/compose/releases/download/v2.23.3/docker-compose-linux-x86_64</span><br><span class="line"><span class="built_in">mkdir</span> -p /usr/bin/docker-compose</span><br><span class="line"><span class="built_in">mv</span> docker-compose-linux-x86_64 /usr/bin/docker-compose/</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装harbor</span></span><br><span class="line"><span class="comment">#在线安装直接wget github上的安装包 wget https://github.com/goharbor/harbor/releases/download/v2.10.0/harbor-online-installer-v2.10.0.tgz</span></span><br><span class="line"><span class="comment">#离线安装需要从可以在github寻找对应版本的offline包，上传至虚机进行安装</span></span><br><span class="line"><span class="comment">#在线安装非常折磨，推荐离线安装</span></span><br><span class="line">tar zxvf harbor-offline-installer-v2.10.0.tgz</span><br><span class="line"><span class="built_in">cd</span> harbor</span><br><span class="line"><span class="built_in">cp</span> harbor.yml.tmpl harbor.yml</span><br><span class="line"><span class="comment">#修改配置文件，改成和上面的证书一致的信息</span></span><br><span class="line"><span class="comment">#把证书相关放到/ssl</span></span><br><span class="line"><span class="built_in">mkdir</span> /ssl</span><br><span class="line"><span class="built_in">cp</span> harbor.* ca.* /ssl/</span><br><span class="line">vim harbor.yml</span><br><span class="line">sed -i <span class="string">&#x27;s/^hostname.*/hostname: harbor/&#x27;</span> harbor.yml</span><br><span class="line">sed -i <span class="string">&#x27;s/\/your\/certificate\/path/\/ssl\/harbor.pem/&#x27;</span> harbor.yml</span><br><span class="line">sed -i <span class="string">&#x27;s/\/your\/private\/key\/path/\/ssl\/harbor.key/&#x27;</span> harbor.yml</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line"><span class="built_in">cd</span> ~/harbor/</span><br><span class="line">./install.sh</span><br><span class="line"><span class="comment">#成功提示如图</span></span><br><span class="line"><span class="comment">#修改宿主机hosts文件</span></span><br><span class="line">C:\Windows\System32\drivers\etc\hosts</span><br><span class="line">在末尾添加并保存</span><br><span class="line">192.168.8.148 harbor</span><br><span class="line"></span><br><span class="line">宿主机访问https://harbor/</span><br><span class="line"><span class="comment">#默认账号密码admin/Harbor12345</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>安装完成如图提示<br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240227173505.png"></p>
<p>登录web界面<br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240227173716.png"></p>
<h1 id="测试：使用harbor内的镜像"><a href="#测试：使用harbor内的镜像" class="headerlink" title="测试：使用harbor内的镜像"></a>测试：使用harbor内的镜像</h1>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/02/27</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/02/27/k8s/">
                
                <span class="abstract-title-text">k8s笔记合集</span>
            </a>
            <div class="abstract-content">
                <p>注：本文较长，建议配合右侧目录食用</p>
<h1 id="docker相关知识补充"><a href="#docker相关知识补充" class="headerlink" title="docker相关知识补充"></a>docker相关知识补充</h1><p>关于docker的详细基础可以看另外一篇博文，这里只介绍与k8s相关的部分，以及做一些补充</p>
<h2 id="Dockerfile的介绍与书写"><a href="#Dockerfile的介绍与书写" class="headerlink" title="Dockerfile的介绍与书写"></a>Dockerfile的介绍与书写</h2><p>Dockerfile是一个用于定义Docker镜像的文本文件，包含了一系列的指令和参数，用于指示Docker在构建镜像时应该执行哪些操作，例如基于哪个基础镜像、复制哪些文件到镜像中、运行哪些命令等。</p>
<p>是除了从镜像仓库拉取、解压保存镜像以外的自定义构建镜像的方式，通过docker bulid dockerfile来构建</p>
<p>主要有几个部分组成，包括基础镜像，创建者信息，镜像操作指令，容器启动指令</p>
<p>构建指令：<strong>docker build -t&#x3D;”image-name” &lt;文件目录&gt; –load</strong></p>
<p>#Dockerfile文件指令<br>#FROM<br>FROM指定基础镜像，这个文件需要在本地有<br>如果在docker build后增加–load参数 可以去docker官网进行拉取<br>Dockerfile文件中定义的镜像就以FROM的镜像为基础，可指定tag</p>
<p>#MAINTAINER<br>是备注，用以指定创建者信息</p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/02/27</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/02/06/python/">
                
                <span class="abstract-title-text">Python笔记合集</span>
            </a>
            <div class="abstract-content">
                <h1 id="Anaconda开发环境介绍与搭建"><a href="#Anaconda开发环境介绍与搭建" class="headerlink" title="Anaconda开发环境介绍与搭建"></a>Anaconda开发环境介绍与搭建</h1><p>Anaconda是一个软件集合，自带了很多的模块的二进制文件（可以直接本地构建模块），并提供了conda和pip两个包管理工具。能够提供python解释器、模块与虚拟环境的管理</p>
<h2 id="模块-——-实现具体功能的工具包"><a href="#模块-——-实现具体功能的工具包" class="headerlink" title="模块 —— 实现具体功能的工具包"></a>模块 —— 实现具体功能的工具包</h2><p>比如想实现下载、上传功能，存储功能，可以寻找现成的网络的、数据库的模块可以来调用<br>(1)标准模块——python的开发者编写的模块<br>(2)第三方模块</p>
<h2 id="虚拟环境-——-给开发环境做用途上的区分"><a href="#虚拟环境-——-给开发环境做用途上的区分" class="headerlink" title="虚拟环境 —— 给开发环境做用途上的区分"></a>虚拟环境 —— 给开发环境做用途上的区分</h2><p>通过划分多个开发环境，为不同的环境设置不同版本的解释器和模块，比如区分python2与3的环境<br>比如做web开发、爬虫开发、图形化开发、科学计算和数据分析、机器学习与深度学习<br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240206135205.png" alt="图片"></p>
<h2 id="pip和conda包管理工具的对比："><a href="#pip和conda包管理工具的对比：" class="headerlink" title="pip和conda包管理工具的对比："></a>pip和conda包管理工具的对比：</h2><p>(1)软件仓库的区别<br>conda使用anacconda.org软件仓库<br>pip使用pypi，python官网的软件仓库，模块数量多</p>
<p>(2)模块内容<br>conda都是二进制，可以直接读取<br>pip源码和二进制都有，源码需要编译会比较慢</p>
<p>(3)支持的语言<br>conda支持多语言<br>pip只支持python</p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/02/06</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/02/06/pve/">
                
                <span class="abstract-title-text">虚拟化系统PVE物理机快速安装指南</span>
            </a>
            <div class="abstract-content">
                <p>环境：<br>i5-12450H<br>32G内存<br>2T SSD<br>1个以太网卡1个无线网卡<br>pve版本8.1-1</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="下载pve的镜像"><a href="#下载pve的镜像" class="headerlink" title="下载pve的镜像"></a>下载pve的镜像</h2><p>下载链接，这两个都可以：</p>
<p><a target="_blank" rel="noopener" href="https://enterprise.proxmox.com/iso/">Index of &#x2F;iso&#x2F; (proxmox.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.proxmox.com/en/downloads">Download Proxmox software, datasheets, agreements</a></p>
<p>iso就有1个多G，带驱动的，不用自己封装驱动真好</p>
<h2 id="制作U盘"><a href="#制作U盘" class="headerlink" title="制作U盘"></a>制作U盘</h2><p>可以用rufus，免费好用，不赘述</p>
<p>做完之后会出现三个不可访问的盘符，不用管它，直接插U盘就行了</p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/02/06</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2024/02/02/hexo/">
                
                <span class="abstract-title-text">使用1panel搭建Hexo博客</span>
            </a>
            <div class="abstract-content">
                <p>环境<br>almalinux9.3 minimal安装<br>12core，16G内存，200G硬盘<br>192.168.10.116&#x2F;24<br>npm版本8.19.4<br>node.js版本21.1.0</p>
<p>almalinux没有有效的docker安装源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#almalinux安装docker与1panel</span></span><br><span class="line"><span class="comment">#官方源</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment">#阿里云加速源</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum -y update</span><br><span class="line">yum -y install docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="comment">#安装1panel</span></span><br><span class="line">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; sudo bash quick_start.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="主机内安装hexo"><a href="#主机内安装hexo" class="headerlink" title="主机内安装hexo"></a>主机内安装hexo</h1><h2 id="环境初始化"><a href="#环境初始化" class="headerlink" title="环境初始化"></a>环境初始化</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个目录用以存放文件</span></span><br><span class="line"><span class="built_in">mkdir</span> /blog</span><br><span class="line"><span class="comment">#安装工具</span></span><br><span class="line">yum -y install git npm</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line"><span class="comment">#初始化</span></span><br><span class="line">hexo init /blog/</span><br><span class="line"><span class="built_in">cd</span> /blog</span><br><span class="line">npm install</span><br><span class="line"><span class="comment">#清楚静态文件</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="comment">#生成静态文件</span></span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure>

<h2 id="web端创建node-js环境"><a href="#web端创建node-js环境" class="headerlink" title="web端创建node.js环境"></a>web端创建node.js环境</h2><p>因为默认hexo使用的是4000端口，所以在创建时也要使用4000，不然会无法访问<br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240205025123.png" alt="图片"></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>查看，显示已经启动，并且可以通过curl进行测试<br>curl <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a><br><img src="https://cdn.jsdelivr.net/gh/durative/picture-warehouse@main/images/20240205025141.png" alt="图片"></p>
            </div>
            <!-- read more -->
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/26">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2024/02/02</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
    <!-- paginator  -->
    
</main>

                <!-- profile -->
                
                    <div class="profile">
    <img class="profile-avatar" alt="avatar" src= /avatar/Homura.jpg />
    <div class="profile-name">王盛</div>
    
        <div class="profile-signature">
            当生命指向成长，时间就是你的朋友
        </div>
    
    
        <div class="profile-social">
            
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    


        </div>
    
    
        <div class="friends">
            <div>
                
                FRIENDS
            </div>
            
                
                    <span>
                        <a href="//blog.csdn.net/qq_72569959?spm=1000.2115.3001.5343" target="_blank">MyCSDN</a>
                    </span>
                
            
        </div>
    
    
        <div class="profile-link-item">
            <a href="/about" class="about-me">
                
                ABOUT ME
            </a>
        </div>
    
    
    
</div>

                
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
    
        <div class="social">
            
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    


        </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    
    <!-- 不蒜子  -->
    
        <div class="busuanzi-container">
            
             
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
            
        </div>
    	
</footer>

        </div>
        <!-- toc -->
        
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 10
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
        
            
            
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/DEBD/">DRBD分布式存储单活实验</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/exsi7/">ESXi物理机安装踩坑汇总</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/linux-raid/">基于mdadm创建与管理软raid</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/nginx/">nginx详解</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/ansible/">Ansible笔记集合</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/27</span>
            <a class="archive-post-title" href="/2024/02/27/harbor/">本地部署harbor私有镜像仓库</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/27</span>
            <a class="archive-post-title" href="/2024/02/27/k8s/">k8s笔记合集</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/06</span>
            <a class="archive-post-title" href="/2024/02/06/python/">Python笔记合集</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/06</span>
            <a class="archive-post-title" href="/2024/02/06/pve/">虚拟化系统PVE物理机快速安装指南</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/02</span>
            <a class="archive-post-title" href="/2024/02/02/hexo/">使用1panel搭建Hexo博客</a>
        </li>
    
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
        
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "http://example.com",
        root: siteMetaRoot,
        author: "John Doe"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->


        <!-- main func -->
        <script src="/scripts/main.js?v=20211217"></script>
        <!-- dark mode -->
        <script src="/scripts/dark.js?v=20211217"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>
        <!-- algolia -->
        
        <!-- busuanzi -->
        
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        
        <!-- CNZZ -->
        
        <!-- async load share.js -->
        
        <!-- mermaid -->
        
    </body>
</html>
